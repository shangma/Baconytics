<!DOCTYPE html>

<html>

<h3>Top Trending Topics</h3>
<form id="weekform">
	<select id="dropDown_week" onChange="getKeywords(this.options[this.selectedIndex].value)">

	</select> 
</form>
<script type="text/javascript" src="jquery-1.7.1.min.js"></script>
<script type="text/javascript" src="gchart.js"></script>
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript">
	$.getJSON("./baconytics.json", function(data) {
                console.log(data);
				$.each(data.daily_trends, function(key,value){
					var d1= new Date(value.start_time),
						d2= new Date(value.end_time);
						//console.log(d1.toDateString());
						//console.log(d2.toDateString());
					$('#dropDown_week').append('<option value="' + value.end_time + '">' + d1.toDateString()+ ' ~ ' +d2.toDateString()+ '</option>');
				});				
    });
	
	function getKeywords(time_index) {	
		$('.kw').remove();
		$.getJSON("./baconytics.json", function(data) {
                //console.log(jsonData);
				//window.getData(jsonData);
				$.each(data.daily_trends, function(key, value){
					//console.log(value);
					if(value.end_time == time_index){
						//console.log(key);
						window.getData(value);
						drawChart2(value);
						drawKeywordBarGraph(value);
						$.each(value.keyword_list, function(k,v){
							//console.log(k);
							//console.log(v.keyword);
							$('#content').append("<a class='kw' href='javascript:getLinkwithKeyword(" + k + ")'>" + v.keyword + "<br /></a>");
						});
					}
				});
        });
	}
	function getLinkwithKeyword(i){
		window.getLink(i);
	}
</script>
<p><b id='content'></b><p class="kw"><b>Select the drop down menu to see trending topics within certain period of time.</b></p> </p> 
<body>
	
</body>
</html>
