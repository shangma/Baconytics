<html>
  <head>
    <script type="text/javascript"
        src='https://www.google.com/jsapi?autoload={"modules":[{"name":"visualization","version":"1"}]}'>
    </script>
    <script type="text/javascript" src="jquery-1.7.1.min.js"></script>
    <script type="text/javascript">
     google.load("visualization", "1", {packages:["table"]});
      google.setOnLoadCallback(drawTable);
      
     function drawChart() {
    	  $.ajax({
              url: "./analyzer",
              success: function (array) {
                  var obj = jQuery.parseJSON(array);
                  console.log(array);
                  var data = new google.visualization.DataTable();
		          data.addColumn('string', 'username');
		          data.addColumn('number', 'Criteria');
		          data.addColumn('number', 'count');
		          data.addColumn('string', 'username');
		          /* data.addColumn('number', 'Population'); */
		          data.addRows(obj);

		          var options = {
		            title: 'Influential Users',
		            hAxis: {title: 'Criteria'},
		            vAxis: {title: 'Count'},
		            bubble: {textStyle: {fontSize: 11}}
		          };

		          var chart = new google.visualization.BubbleChart(document.getElementById('chart_div'));
		          chart.draw(data, options);
              		}
        
              });    	  
   	}
     
     function drawTable() {
   	  $.ajax({
             url: "./analyzer",
             success: function (array) {
                 var obj = jQuery.parseJSON(array);
                 console.log(array);
                 var data = new google.visualization.DataTable();
		          data.addColumn('string', 'username');
		          data.addColumn('number', 'Total Karma');
		          data.addColumn('number', 'Total Visits');
		          data.addColumn('number', 'Total Contribution');
		          data.addColumn('number', 'Total Comments');
		          /* data.addColumn('number', 'Population'); */
		          data.addRows(obj);

		          
		          var chart = new google.visualization.Table(document.getElementById('table_div'));
		          chart.draw(data, {showRowNumber: false});
             		}
       
             });    	  
  	}
    </script>
  </head>
  <body>
    <div id="chart_div" style="width: 900px; height: 500px;"></div>
    <div id="table_div" style="width: 900px; height: 500px;"></div>
  </body>
</html>