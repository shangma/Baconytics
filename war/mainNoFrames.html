<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html dir="ltr" xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Baconytics</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="description" content="Testing Bacon Main Page" />
<link rel="stylesheet" type="text/css" href="style.css" />
</head>

<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript" src="jquery-1.7.1.min.js"></script>

<script type="text/javascript" src="gchart.js"></script>
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript" src="jquery-1.7.1.min.js"></script>

<script type="text/javascript">

	// Load the Visualization API and the piechart package.
      google.load('visualization', '1.0', {'packages':['corechart']});

      // Set a callback to run when the Google Visualization API is loaded.

	/**Trend Keywords **/
      	google.setOnLoadCallback(drawKeywordBarGraph);
	
	/**user data **/
	/*google.setOnLoadCallback(userTopKarma);
	google.setOnLoadCallback(userTopNumCom);
	google.setOnLoadCallback(userTopNumLinks);
	google.setOnLoadCallback(userTotNumVisits);
	google.setOnLoadCallback(drawTable)
*/
	/** Forum Activity **/
	google.setOnLoadCallback(drawChart);
	
	  
$(document).ready(function() {
		var jsonData;
		extractSource();
		var locate = window.location;
		var dDown = window.document.getElementById("dropDown");
		$.ajax({
			url : "./analyzer",
			success : function(array){
				jsonData = $.parseJSON(array);
				drawTable(jsonData);
				userTopKarma(jsonData);
				userTopNumCom(jsonData);
				userTopNumLinks(jsonData);
				userTotNumVisits(jsonData);
				
				
			}
		})
});

function extractSource() 
{	
        
		
		$("#trendingTopics").load("./trend.html", function(responseText, statusText, xhr){
            if(statusText == "success"){
                    //alert("Successfully loaded the content!");
                    //this alert should display the source of the page extracted.
                    //alert("in trendingTopics");
            }
            if(statusText == "error")
                    alert("An error occurred: " + xhr.status + " - " + xhr.statusText);		
    	});
		
		
		$("#trendLinks").load("./link.html", function(responseText, statusText, xhr){
            if(statusText == "success"){
                    //alert("Successfully loaded the content!");
                    //this alert should display the source of the page extracted.
                    //alert("in trendLinks");
            }
            if(statusText == "error")
                    alert("An error occurred: " + xhr.status + " - " + xhr.statusText);		
    	});

		$("#metricChoose").load("./metricSelect.html", function(responseText, statusText, xhr){
            if(statusText == "success"){
                //alert("Successfully loaded the content!");
                //this alert should display the source of the page extracted.
                //alert("in metric");
            }
            if(statusText == "error")
                alert("An error occurred: " + xhr.status + " - " + xhr.statusText);		
    	});
        
		//hacky fix for graph invisibility
		toggle('trendingTopics');
		toggle('userTable');
		toggle('trendLinks');
        	toggle('forumActivity');
        	hide('forumActivity');
		show('userTable');
		

		toggle('graphRight');
		toggle('graphLeft');
		show('graphRight');
		show('graphLeft');

		toggle('graphBotLeft');
		toggle('graphBotRight');
		toggle('graphTopLeft');
		toggle('graphTopRight');
		hide('graphBotLeft');
		hide('graphBotRight');
		hide('graphTopLeft');
		hide('graphTopRight');

}

function changeLayoutTrendKeys(){
//alert("MADE IT!");
/**OLD CODE!***
	google.load('visualization', '1.0', {'packages':['corechart']});
	google.setOnLoadCallback(drawChart3);
	//alert("MADE IT BACK!");
	
	toggle('graphLeft');
	toggle('graphRight');
	//toggle('testingHidden');
	//toggle('timeVis');
	
	toggle('userTopKarma');
	toggle('userTopNumCom');
	toggle('userTopNumLinks');
	toggle('userTotNumVisits');
	
**/

	//google.load('visualization', '1.0', {'packages':['corechart']});
	//google.setOnLoadCallback(drawKeywordBarGraph);
	//google.setOnLoadCallback(drawChart2);

	show('userTable');

	document.getElementById('articleLinkContainer').style.width='850px';
	document.getElementById('trendLinks').style.width='700px';
	document.getElementById('leftContainer').style.width='300px';
	//document.getElementById('trendLinks').style.border: 0;
	show('trendLinks');
	show('trendingTopics');

	show('graphLeft');
	show('graphRight');
	//toggle('testingHidden');
	//toggle('timeVis');

	hide('graphBotLeft');
	hide('graphBotRight');
	hide('graphTopLeft');
	hide('graphTopRight');
    	hide('forumActivity');

}

function changeLayoutUserData(){

	hide('trendingTopics');
	hide('trendLinks');
    	hide('forumActivity');

	document.getElementById('articleLinkContainer').style.width='550px';	
	//document.getElementById('trendLinks').style.width='1000px';

	document.getElementById('leftContainer').style.width='450px';
	
	hide('userTable');

	hide('graphLeft');
	hide('graphRight');

	show('graphBotLeft');
	show('graphBotRight');
	show('graphTopLeft');
	show('graphTopRight');
}

function changeTimeVis(){
    show('forumActivity');

    hide('trendingTopics');
	hide('trendLinks');
    
    hide('userTable');

	hide('graphLeft');
	hide('graphRight');
    
	hide('graphBotLeft');
	hide('graphBotRight');
	hide('graphTopLeft');
	hide('graphTopRight');
}



function show(id){

	var state = document.getElementById(id).style.display;
        if (state == 'none') {
			document.getElementById(id).style.display = 'block';
    	}
}

function hide(id){

	var state = document.getElementById(id).style.display;
        if (state == 'block') {
			document.getElementById(id).style.display = 'none';
    	}
}

function toggle(id) {
    var state = document.getElementById(id).style.display;
        if (state == 'block') {
			document.getElementById(id).style.display = 'none';
    } else {
        document.getElementById(id).style.display = 'block';
    }
}


</script>
<body>

	<div id="outerContainer">
		<div id="leftContainer">

			<!--
				<div id="metricChoose"></div>
			-->
			<!-- trend keywords -->
			<div id="trendingTopics"></div>
			
			<!-- user data -->
			<div id="userTable"></div>
            
		    	<!-- forum activity -->
		    	<div id="forumActivity">
				<div id="chart_vote" style="width: 100%; height: 50%;"></div>
				<div id="chart_post" style="width: 100%; height: 50%;"></div>
		    	</div>
		</div>
		
		<div id="articleLinkContainer">
		
			<div id="trendLinks"></div>

			<div id="metricChoose"></div>			

			<div id='graphTopLeft'></div>

			<!--<div id='dropdown'></div>-->

			<div id='graphTopRight'></div>				
			<div id="graphBotLeft"></div>
			<div id="graphBotRight"></div>
						
		</div>
		
		<!--
		<div id="rightContainer">
			
		</div>
		-->
		
	</div>
	<div id="bottomContainer">
			
		<div id="graphLeft"></div>
		<div id="graphRight"></div>
		<!--
		<div id="testingHidden"></div>
		-->

		<!--
		<div id='graphTopLeft'></div>
		<div id='graphTopRight'></div>				
		<div id="graphBotLeft"></div>
		<div id="graphBotRight"></div>
		-->

	</div>
	
</body>
</html>
